<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./jquery-3.6.0.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <title>Sudoku Game </title>
</head>
<body>
    <!-- HTML should input only from 1~9 -->
    
    <h1>SUDOKU</h1>
    <hr>
    <h2 id="result"></h2>
    <div>
        <!-- [9, 7, 2, 5, 6, 3, 8, 1, 4], -->
        <div class="by9">
            <input id="num00" type="number" value="9" />
            <input id="num01" type="number" value="7" />
            <input id="num02" type="number" value="2" />
        </div>
        <div class="by9">
            <input id="num03" type="number" value="5" />
            <input id="num04" type="number" value="6" />
            <input id="num05" type="number" value="3" />
        </div>
        <div class="by9">
            <input id="num06" type="number" value="8" />
            <input id="num07" type="number" value="1" />
            <input id="num08" type="number" value="4" />
        </div>
        
        
    </div>
    <div>
         <!-- [5, 1, 3, 8, 7, 4, 6, 9, 2], -->
         <div class="by9">
            <input id="num10" type="number" value="5" />
            <input id="num11" type="number" value="1"/>
            <input id="num12" type="number" value="3" >
         </div>
        <div class="by9">
            <input id="num13" type="number" value="8" />
            <input id="num14" type="number" value="7"/>
            <input id="num15" type="number" value="4" />
        </div>
        <div class="by9">
            <input id="num16" type="number" value="6" />
            <input id="num17" type="number" value="9"/>
            <input id="num18" type="number" value="2">
        </div>
    </div>

    <div>
        <!-- [8, 4, 6, 9, 1, 2, 3, 5, 7], -->
        <div class="by9_3">
            <input id="num20" type="number" value="8"/>
            <input id="num21" type="number" value="4"/>
            <input id="num22" type="number" value="6"/>
        </div>
        <div class="by9_3">
            <input id="num23" type="number" value="9"/>
            <input id="num24" type="number" value="1"/>
            <input id="num25" type="number" value="2"/>
        </div>
        <div class="by9_3">
            <input id="num26" type="number" value="3"/>
            <input id="num27" type="number" value="5"/>
            <input id="num28" type="number" value="7"/>
        </div>
        
    </div>

    <div>
        <!-- [3, 8, 5, 2, 9, 6, 7, 4, 1], -->
        <div class="by9">
            <input id="num30" type="number" value="3"/>
            <input id="num31" type="number" value="8"/>
            <input id="num32" type="number" value="5"/>
        </div>
        <div class="by9">
            <input id="num33" type="number" value="2"/>
            <input id="num34" type="number" value="9"/>
            <input id="num35" type="number" value="6"/>
        </div>
       <div class="by9">
            <input id="num36" type="number" value="7"/>
            <input id="num37" type="number" value="4"/>
            <input id="num38" type="number" value="1"/>
       </div>
        
    </div>

    <div>
        <!-- [6, 2, 1, 3, 4, 7, 9, 8, 5], -->
        <div class="by9">
            <input id="num40" type="number" value="6"/>
            <input id="num41" type="number" value="2"/>
            <input id="num42" type="number" value="1" />
        </div>
       <div class="by9">
            <input id="num43" type="number" value="3" />
            <input id="num44" type="number" value="4"/>
            <input id="num45" type="number" value="7"/>
       </div>
        <div class="by9">
            <input id="num46" type="number" value="9" />
            <input id="num47" type="number" value="8"/>
            <input id="num48" type="number" value="5"/>
        </div>
        
    </div>

    <div>
        <!-- [4, 9, 7, 1, 5, 8, 2, 3, 6] -->
        <div class="by9_3">
            <input id="num50" type="number" value="4"/>
            <input id="num51" type="number" value="9"/>
            <input id="num52" type="number" value="7"/>
        </div>
        <div class="by9_3">
            <input id="num53" type="number" value="1"/>
            <input id="num54" type="number" value="5"/>
            <input id="num55" type="number" value="8"/>
        </div>
        <div class="by9_3">
            <input id="num56" type="number" value="2"/>
            <input id="num57" type="number" value="3"/>
            <input id="num58" type="number" value="6"/>
        </div>
        
    </div>

    <div>
        <!-- [7, 3, 8, 4, 2, 1, 5, 6, 9], -->
        <div class="by9">
            <input id="num60" type="number" value="7" />
            <input id="num61" type="number" value="3" />
            <input id="num62" type="number" value="8" />
        </div>
        <div class="by9">
            <input id="num63" type="number" value="4"/>
            <input id="num64" type="number" value="2" />
            <input id="num65" type="number" value="1" />
        </div>
        <div class="by9">
            <input id="num66" type="number" value="5"/>
            <input id="num67" type="number" value="6"/>
            <input id="num68" type="number" value="9"/>
        </div>
    </div>

    <div>
        <!-- [1, 6, 9, 7, 8, 5, 4, 2, 3], -->
        <div class="by9">
            <input id="num70" type="number" value="1"/>
            <input id="num71" type="number" value="6" />
            <input id="num72" type="number" value="9"/>
        </div>
        <div class="by9">
            <input id="num73" type="number" value="7" />
            <input id="num74" type="number" value="8" />
            <input id="num75" type="number" value="5" />
        </div>
        <div class="by9">
            <input id="num76" type="number" value="4" />
            <input id="num77" type="number" value="2" />
            <input id="num78" type="number" value="3" />
        </div>
       
    </div>

    <div> 
        <!-- [2, 5, 4, 6, 3, 9, 1, 7, 8] -->
        <div class="by9">
            <input id="num80" type="number" value="2" />
            <input id="num81" type="number" value="5" />
            <input id="num82" type="number" value="4" />
        </div>
        <div class="by9">
            <input id="num83" type="number" value="6" />
            <input id="num84" type="number" value="3" />
            <input id="num85" type="number" value="9" />
        </div>
        <div class="by9">
            <input id="num86" type="number" value="1" />
            <input id="num87" type="number" value="7" />
            <input id="num88" type="number" value="8" />
        </div>
    </div>


    <button type="button" class="btn btn-outline-secondary">Validate</button>
    <button type="button" class="btn btn-outline-secondary another_num">Another Sudoku</button>
    <button class="accordion">1# Sudoku Rule</button>
    <div class="panel">
        <p>Sudoku Rule № 1: Use only numbers bettewen 1-9 inside of each square.</p>
    </div>
    <button class="accordion">2# Sudoku Rule</button>
    <div class="panel">
        <p>Sudoku Rule № 2: Don’t Repeat Any Numbers inside the square and next another square.</p>
    </div>
    <button class="accordion">3# Sudoku Rules</button>
    <div class="panel">
        <p>Sudoku Rule № 3: Don’t Guess,To avoid mistakes you can do it</p>
    </div>
    <button class="accordion">4# Sudoku Rules</button>
    <div class="panel">
        <p> Sudoku Rule № 4: Use Process of Elimination(analyse the numbers and the game)</p>
    </div>

    
</body>
<script>
    // First Button to call Validate function
    let validate_btn = document.getElementsByTagName("button")[0];
    // Second Button for showing another number
    let another_num = document.getElementsByTagName("button")[1];
    
    var num = $("input");
    // ----- Add Class Attributes and Class to Number input 
    // Attribute not to input String
   
    // limit input only numbers
    num.attr("onkeypress", "return event.charCode >= 48");

    num.attr("maxlength", "1");
    num.attr("oninput", "numberMaxLength(this);");
    num.addClass("tile");
    
    //function for limit digit only 1.
    function numberMaxLength(maxLen){
        if(maxLen.value.length > maxLen.maxLength){
            maxLen.value = maxLen.value.slice(0, maxLen.maxLength);
        }
    }

    var rules = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < rules.length; i++) {
        rules[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.display === "block") {
                panel.style.display = "none";
            } else {
                panel.style.display = "block";
            }
        });
    }
    
   
    another_num.addEventListener('click', function(){
        $("input").eq(0).attr("value",'6');
        $("input").eq(1).attr("value",'9');
        $("input").eq(2).attr("value",'8');
        $("input").eq(3).attr("value",'2');
        $("input").eq(4).attr("value",'5');
        $("input").eq(5).attr("value",'7');
        $("input").eq(6).attr("value",'1');
        $("input").eq(7).attr("value",'3');
        $("input").eq(8).attr("value",'4');

        $("input").eq(9).attr("value",'5');
        $("input").eq(10).attr("value",'4');
        $("input").eq(11).attr("value",'2');
        $("input").eq(12).attr("value",'3');
        $("input").eq(13).attr("value",'6');
        $("input").eq(14).attr("value",'1');
        $("input").eq(15).attr("value",'9');
        $("input").eq(16).attr("value",'8');
        $("input").eq(17).attr("value",'7');

        $("input").eq(18).attr("value",'7');
        $("input").eq(19).attr("value",'1');
        $("input").eq(20).attr("value",'3');
        $("input").eq(21).attr("value",'9');
        $("input").eq(22).attr("value",'4');
        $("input").eq(23).attr("value",'8');
        $("input").eq(24).attr("value",'6');
        $("input").eq(25).attr("value",'5');
        $("input").eq(26).attr("value",'2');

        $("input").eq(27).attr("value",'9');
        $("input").eq(28).attr("value",'5');
        $("input").eq(29).attr("value",'4');
        $("input").eq(30).attr("value",'7');
        $("input").eq(31).attr("value",'8');
        $("input").eq(32).attr("value",'2');
        $("input").eq(33).attr("value",'3');
        $("input").eq(34).attr("value",'1');
        $("input").eq(35).attr("value",'6');

        $("input").eq(36).attr("value",'2');
        $("input").eq(37).attr("value",'8');
        $("input").eq(38).attr("value",'6');
        $("input").eq(39).attr("value",'4');
        $("input").eq(40).attr("value",'1');
        $("input").eq(41).attr("value",'3');
        $("input").eq(42).attr("value",'7');
        $("input").eq(43).attr("value",'9');
        $("input").eq(44).attr("value",'5');

        $("input").eq(45).attr("value",'3');
        $("input").eq(46).attr("value",'7');
        $("input").eq(47).attr("value",'1');
        $("input").eq(48).attr("value",'5');
        $("input").eq(49).attr("value",'9');
        $("input").eq(50).attr("value",'6');
        $("input").eq(51).attr("value",'2');
        $("input").eq(52).attr("value",'4');
        $("input").eq(53).attr("value",'8');
        
        $("input").eq(54).attr("value",'8');
        $("input").eq(55).attr("value",'2');
        $("input").eq(56).attr("value",'9');
        $("input").eq(57).attr("value",'6');
        $("input").eq(58).attr("value",'3');
        $("input").eq(59).attr("value",'4');
        $("input").eq(60).attr("value",'5');
        $("input").eq(61).attr("value",'7');
        $("input").eq(62).attr("value",'1');

        $("input").eq(63).attr("value",'1');
        $("input").eq(64).attr("value",'3');
        $("input").eq(65).attr("value",'7');
        $("input").eq(66).attr("value",'8');
        $("input").eq(67).attr("value",'2');
        $("input").eq(68).attr("value",'5');
        $("input").eq(69).attr("value",'4');
        $("input").eq(70).attr("value",'6');
        $("input").eq(71).attr("value",'9');

        $("input").eq(72).attr("value",'4');
        $("input").eq(73).attr("value",'6');
        $("input").eq(74).attr("value",'5');
        $("input").eq(75).attr("value",'1');
        $("input").eq(76).attr("value",'7');
        $("input").eq(77).attr("value",'9');
        $("input").eq(78).attr("value",'8');
        $("input").eq(79).attr("value",'2');
        $("input").eq(80).attr("value",'2');

        take_sudoku();

        sudoku = sudoku.map(function(sudoku) {
            return [ Number(sudoku[0]), Number(sudoku[1]), Number(sudoku[2])
                    ,Number(sudoku[3]), Number(sudoku[4]), Number(sudoku[5])
                    ,Number(sudoku[6]), Number(sudoku[7]), Number(sudoku[8])];
        });

        //Call the function.
        SudokuValid(sudoku);
        console.log(sudoku);
    })

    validate_btn.addEventListener('click', function () {
        take_sudoku();
        
        // Input Array 
        // sudoku = [
            // 9 7 2 5 6 3 8 1 4
            // [9, 7, 2, 5, 6, 3, 8, 1, 4],
            // [5, 1, 3, 8, 7, 4, 6, 9, 2],
            // [8, 4, 6, 9, 1, 2, 3, 5, 7],
            // [3, 8, 5, 2, 9, 6, 7, 4, 1],
            // [6, 2, 1, 3, 4, 7, 9, 8, 5],
            // [4, 9, 7, 1, 5, 8, 2, 3, 6],
            // [7, 3, 8, 4, 2, 1, 5, 6, 9],
            // [1, 6, 9, 7, 8, 5, 4, 2, 3],
            // [2, 5, 4, 6, 3, 9, 1, 7, 8]
        // ];

        // Parse sudoku Array to integer
        sudoku = sudoku.map(function(sudoku) {
            return [ Number(sudoku[0]), Number(sudoku[1]), Number(sudoku[2])
                    ,Number(sudoku[3]), Number(sudoku[4]), Number(sudoku[5])
                    ,Number(sudoku[6]), Number(sudoku[7]), Number(sudoku[8])];
        });
        console.log(sudoku); // Just checking sudoku is right or not.

        //Call the function.
        SudokuValid(sudoku);
        
    })

    //function for taking sudoku numbers to Array sudoku.
    function take_sudoku(){
        array = [];
        sudoku = [];

        let input_num = 0;
        for (let i = 0; i < 9; i++) {
            for (let j = 0; j < 9; j++) {
                // if($('input').eq(input_num).val() == ""){
                    
                // }
                // else{
                    array.push($('input').eq(input_num).val());
                    input_num++;

                    if(input_num % 9 == 0){
                    sudoku.push(array);   
                    array = [];  
                
                    }
            }     
        }
    }

    function SudokuValid(sudoku) {
            if (validateColumn(sudoku) && validateRow(sudoku) && validateBox(sudoku)) {
                return $('h2').text("Correct!!");
            } else {
                return $('h2').text("Wrong!!");
            }

        }

    //function for validate Column
    function validateColumn(sudoku) {
        for (let i = 0; i < sudoku.length; i++) {
            const column = new Set();

            // value of sudoku[i][0]~ sudoku[i][9] in column
            for (let j = 0; j < sudoku.length; j++) {
                let value = sudoku[i][j];
                column.add(value);
            }
                    // Compare column with J(1~9)
                    // IF there are numbers(1~9) will pass or not / return false;
            for (let j = 1; j < 10; j++) {
                if (column.has(j)) {
                //pass
                }else {
                    return false;
                }
            }
        }
        return true;
    }
    //function for validate Row
    function validateRow(sudoku) {
        for (let i = 0; i < sudoku.length; i++) {
            const row = new Set();

            // value of sudoku[0][i]~ sudoku[9][i] in column
            for (let j = 0; j < sudoku.length; j++) {
                let value = sudoku[j][i];
                row.add(value);
            }

            // Compare row with J(1~9)
            // IF there are numbers(1~9) will pass or not / return false;
            for (let j = 1; j < 10; j++) {
                if (row.has(j)) {
                    //pass
                } else {
                    return false;
                }
            }
        }
        return true;
    }

    //function for validate Box
    function validateBox(sudoku) {
        for (let Colbox = 0; Colbox < 3; Colbox++) {
            for (let Rowbox = 0; Rowbox < 3; Rowbox++) {

                // Start of Validate one box
                // set the box 
                const box = new Set();
                for (let i = Colbox * 3; i < 3 + Colbox * 3; i++) {
                    for (let j = Rowbox * 3; j < 3 + Rowbox * 3; j++) {
                        let value = sudoku[i][j];
                        box.add(value);
                    }
                }
                //Validate whether there are right numbers or not
                for (let j = 1; j < 10; j++) {
                    if (box.has(j)) {
                        //pass
                    } else {
                        return false;
                    }
                }
                // End of Validate one box
            }
        }
        return true;
    }

</script>
</html>