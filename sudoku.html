<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./jquery-3.6.0.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <title>Sudoku Game </title>
</head>
<body>
    <!-- HTML should input only from 1~9 -->
    
    <h1>SUDOKU</h1>
    <hr>
    <h2 id="result"></h2>
    <div>
        <!-- [9, 7, 2, 5, 6, 3, 8, 1, 4], -->
        <input id="num00" type="number" value="9"/>
        <input id="num01" type="number" value="7"/>
        <input id="num02" type="number" value="2"/>
        <input id="num03" type="number" value="5"/>
        <input id="num04" type="number" value="6"/>
        <input id="num05" type="number" value="3"/>
        <input id="num06" type="number" value="8"/>
        <input id="num07" type="number" value="1"/>
        <input id="num08" type="number" value="4" />
    </div>
    <div>
         <!-- [5, 1, 3, 8, 7, 4, 6, 9, 2], -->
        <input id="num10" type="number" value="5"/>
        <input id="num11" type="number" value="1"/>
        <input id="num12" type="number" value="3"/>
        <input id="num13" type="number" value="8"/>
        <input id="num14" type="number" value="7"/>
        <input id="num15" type="number" value="4"/>
        <input id="num16" type="number" value="6"/>
        <input id="num17" type="number" value="9"/>
        <input id="num18" type="number" value="2"/>
    </div>

    <div>
        <!-- [8, 4, 6, 9, 1, 2, 3, 5, 7], -->
        <input id="num20" type="number" value="8"/>
        <input id="num21" type="number" value="4"/>
        <input id="num22" type="number" value="6"/>
        <input id="num23" type="number" value="9"/>
        <input id="num24" type="number" value="1"/>
        <input id="num25" type="number" value="2"/>
        <input id="num26" type="number" value="3"/>
        <input id="num27" type="number" value="5"/>
        <input id="num28" type="number" value="7"/>
    </div>

    <div>
        <!-- [3, 8, 5, 2, 9, 6, 7, 4, 1], -->
        <input id="num30" type="number" value="3" />
        <input id="num31" type="number" value="8"/>
        <input id="num32" type="number" value="5"/>
        <input id="num33" type="number" value="2"/>
        <input id="num34" type="number" value="9"/>
        <input id="num35" type="number" value="6"/>
        <input id="num36" type="number" value="7"/>
        <input id="num37" type="number" value="4"/>
        <input id="num38" type="number" value="1"/>
    </div>

    <div>
        <!-- [6, 2, 1, 3, 4, 7, 9, 8, 5], -->
        <input id="num40" type="number" value="6"/>
        <input id="num41" type="number" value="2"/>
        <input id="num42" type="number" value="1"/>
        <input id="num43" type="number" value="3"/>
        <input id="num44" type="number" value="4"/>
        <input id="num45" type="number" value="7"/>
        <input id="num46" type="number" value="9"/>
        <input id="num47" type="number" value="8"/>
        <input id="num48" type="number" value="5"/>
    </div>

    <div>
        <!-- [4, 9, 7, 1, 5, 8, 2, 3, 6] -->
        <input id="num50" type="number" value="4"/>
        <input id="num51" type="number" value="9"/>
        <input id="num52" type="number" value="7"/>
        <input id="num53" type="number" value="1"/>
        <input id="num54" type="number" value="5"/>
        <input id="num55" type="number" value="8"/>
        <input id="num56" type="number" value="2"/>
        <input id="num57" type="number" value="3"/>
        <input id="num58" type="number" value="6"/>
    </div>

    <div>
        <!-- [7, 3, 8, 4, 2, 1, 5, 6, 9], -->
    
        <input id="num60" type="number" value="7" />
        <input id="num61" type="number" value="3" />
        <input id="num62" type="number" value="8" />
        <input id="num63" type="number" value="4" />
        <input id="num64" type="number" value="2" />
        <input id="num65" type="number" value="1" />
        <input id="num66" type="number" value="5" />
        <input id="num67" type="number" value="6" />
        <input id="num68" type="number" value="9" />
    </div>

    <div>
        <!-- [1, 6, 9, 7, 8, 5, 4, 2, 3], -->
        <input id="num70" type="number" value="1" />
        <input id="num71" type="number" value="6" />
        <input id="num72" type="number" value="9" />
        <input id="num73" type="number" value="7" />
        <input id="num74" type="number" value="8" />
        <input id="num75" type="number" value="5" />
        <input id="num76" type="number" value="4" />
        <input id="num77" type="number" value="2" />
        <input id="num78" type="number" value="3" />
    </div>

    <div> 
        <!-- [2, 5, 4, 6, 3, 9, 1, 7, 8] -->
        <input id="num80" type="number" value="2" />
        <input id="num81" type="number" value="5" />
        <input id="num82" type="number" value="4" />
        <input id="num83" type="number" value="6" />
        <input id="num84" type="number" value="3" />
        <input id="num85" type="number" value="9" />
        <input id="num86" type="number" value="1" />
        <input id="num87" type="number" value="7" />
        <input id="num88" type="number" value="8" />
    </div>

    <button type="button" class="btn btn-outline-secondary">Validate</button>
    <button type="button" class="btn rule_btn">Rules</button>

    
</body>

<script>
    
    var num = $("input");
    // ----- Add Class Attributes and Class to Number input 
    // Attribute not to input String
    num.attr("patter", "[1-9]+([,\.][1-9]+)?");

    // To limit input number from 1 digit
    num.attr("maxlength", "1");
    num.attr("oninput", "numberMaxLength(this);");

    // num.attr("step","any");
    num.addClass("tile");

    //function for limit digit only 1.
    function numberMaxLength(maxLen){
        if(maxLen.value.length > maxLen.maxLength){
            maxLen.value = maxLen.value.slice(0, maxLen.maxLength);
        }
    }

    // First Button to call Validate function
    let validate_btn = document.getElementsByTagName("button")[0];
    // Second Button for Rule of SUDOKU
    let rule_btn=document.getElementsByTagName("button")[1];
    
    rule_btn.addEventListener('click',function(){
        alert("Sudoku Rule № 1: Use Numbers 1-9 inside of each square \n Sudoku Rule № 2: Don’t Repeat Any Numbers inside the square and next another square \n Sudoku Rule № 3: Don’t Guess \n Sudoku Rule № 4: Use Process of Elimination");
        
    });

    validate_btn.addEventListener('click', function () {
        
        // Input Sudoku array 
        array = [];
        sudoku = [];

        let input_num = 0;
        for (let i = 0; i < 9; i++) {
            for (let j = 0; j < 9; j++) {
                array.push($('input').eq(input_num).val());
                input_num++;

                if(input_num % 9 == 0){
                    sudoku.push(array);   
                    array= [];  
                }
            }     
        }
         

        // Input Array 
        // sudoku = [
            // 9 7 2 5 6 3 8 1 4
            // [9, 7, 2, 5, 6, 3, 8, 1, 4],
            // [5, 1, 3, 8, 7, 4, 6, 9, 2],
            // [8, 4, 6, 9, 1, 2, 3, 5, 7],
            // [3, 8, 5, 2, 9, 6, 7, 4, 1],
            // [6, 2, 1, 3, 4, 7, 9, 8, 5],
            // [4, 9, 7, 1, 5, 8, 2, 3, 6],
            // [7, 3, 8, 4, 2, 1, 5, 6, 9],
            // [1, 6, 9, 7, 8, 5, 4, 2, 3],
            // [2, 5, 4, 6, 3, 9, 1, 7, 8]
        // ];


        // Parse sudoku Array to Integer
        sudoku = sudoku.map(function(sudoku) {
            return [ Number(sudoku[0]), Number(sudoku[1]), Number(sudoku[2])
                    ,Number(sudoku[3]), Number(sudoku[4]), Number(sudoku[5])
                    ,Number(sudoku[6]), Number(sudoku[7]), Number(sudoku[8])];
        });
        console.log(sudoku);


        SudokuValid(sudoku);

        function SudokuValid(sudoku) {

            if (validateColumn(sudoku) && validateRow(sudoku) && validateBox(sudoku)) {
                return $('h2').text("Correct!!");
            }else {
                return $('h2').text("Wrong!!");
            }

            // const set = new Set();

            // for (let i = 0; i < sudoku.length; i++) {
            //     for (let j = 0; j < sudoku.length; j++) {
            //         const value = sudoku[i][j];

            //         //Check the value less than 0 or bigger than 9
            //         if(sudoku[i][j] == 0 || sudoku[i][j]>9){
            //             alert("All Value must be between 0 to 9");
            //         }

            //         // if (value == ".") {
            //         //     document.write("EMPTY!!");
            //         // }
                    

            //         if (validateRow(sudoku)) {

            //         }

            //         const boxIdx = Math.floor(i / 3) * 3 + Math.floor(j / 3);
            //         const row = `row: ${i}, value ${value}`;
            //         const column = `column: ${j}, value ${value}`;
            //         const box = `box: ${boxIdx}, value ${value}`;


            //         if (set.has(row) || set.has(column) || set.has(box)) {
            //             return $('h2').text("wrong!!");
            //         }

            //         set.add(row);
            //         set.add(column);
            //         set.add(box);
            //     }
            // }
            // // alert("correct");
            // $('h2').text("Correct!!");
        }

        function validateColumn(sudoku) {
            for (let i = 0; i < sudoku.length; i++) {
                const set = new Set();

                for (let j = 0; j < sudoku.length; j++) {
                    let value = sudoku[i][j];
                    set.add(value);

                }

                for (let j = 1; j < 10; j++) {
                    if(set.has(j)) {
                        //pass
                    } else {
                        return false;
                    }
                }
            }
            return true;
        }

        function validateRow(sudoku) {
            for (let i = 0; i < sudoku.length; i++) {
                const set = new Set();

                for (let j = 0; j < sudoku.length; j++) {
                    let value = sudoku[j][i];
                    set.add(value);
                }

                for (let j = 1; j < 10; j++) {
                    if(set.has(j)) {
                        //pass
                    } else {
                        return false;
                    }
                }
            }
            return true;
        }

        function validateBox(sudoku) {

            for (let Colbox = 0; Colbox < 3; Colbox++) {
                for (let Rowbox = 0; Rowbox < 3; Rowbox++) {

                    // Start of Validate one box
                    const set = new Set();
                    for (let i = Colbox*3; i < 3 + Colbox*3; i++) {
                        for (let j = Rowbox*3; j < 3 + Rowbox*3; j++) {
                            let value = sudoku[i][j];
                            set.add(value);
                        }
                    }
                    

                    for (let j = 1; j < 10; j++) {
                        if(set.has(j)) {
                            //pass
                        } else {
                            return false;
                        }
                    }
                    // End of Validate one box
                }
            }
            
                
            return true;
        }


    })




</script>

</html>